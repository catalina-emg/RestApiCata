<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API REST - Catalina</title>
  
  <link rel="shortcut icon" href="restapicata/favicon/favicon.ico" type="image/x-icon">
  <link rel="icon" href="restapicata/favicon/favicon.ico" type="image/x-icon">
  
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      min-height: 100vh;
      font-family: 'Inter', sans-serif;
    }
    .neo-card {
      background: #1e293b;
      border-radius: 16px;
      border: 1px solid #334155;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    .btn-primary {
      background: linear-gradient(135deg, #7c3aed, #c026d3);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
    }
    .btn-danger {
      background: linear-gradient(135deg, #dc2626, #ea580c);
    }
    .btn-success {
      background: linear-gradient(135deg, #059669, #0d9488);
    }
    .btn-warning {
      background: linear-gradient(135deg, #d97706, #ca8a04);
    }
    .glow-text {
      text-shadow: 0 0 20px rgba(124, 58, 237, 0.5);
    }
    .code-block {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
    }
    .user-badge {
      border-radius: 12px;
      padding: 8px 16px;
      font-weight: 600;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
    }
    .header-glow {
      box-shadow: 0 4px 20px rgba(124, 58, 237, 0.3);
    }
  </style>
</head>
<body class="text-slate-200">
  <div class="max-w-7xl mx-auto p-4">
    
    <!-- NUEVO ENCABEZADO MODERNO -->
    <header class="mb-12">
       <div class="flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-slate-800 to-slate-900 border border-slate-700">
        <!-- Logo m√°s peque√±o -->
        <div class="flex items-center gap-3">
          <div class="p-2 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600">
            <div class="text-xl">‚ö°</div>
          </div>
          <div>
            <h1 class="text-xl font-black text-white">CATALINA API</h1>
            <p class="text-slate-400 text-xs">Sistema de Gesti√≥n</p>
          </div>
        </div>
        <!-- Informaci√≥n del usuario a la derecha -->
        <div class="flex items-center gap-4">
          <div id="userBadge" class="user-badge text-white flex items-center gap-3">
            <div class="flex flex-col items-end">
              <span id="userName" class="text-sm font-semibold">Usuario</span>
              <span id="userRole" class="text-xs text-slate-300">Rol</span>
            </div>
            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-bold">
              <span id="userInitial">U</span>
            </div>
          </div>
          <button onclick="logout()" 
                  class="bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-semibold transition-all flex items-center gap-2">
            <span>üö™</span>
            <span class="hidden sm:inline">Cerrar Sesi√≥n</span>
          </button>
        </div>
      </div>
    </header>

    <!-- El resto de tu contenido se mantiene igual -->
    <div class="grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8">
      
      <!-- Panel de Control -->
      <div class="neo-card p-6 xl:col-span-2">
        <h2 class="text-2xl font-bold mb-6 text-white flex items-center gap-3">
          <span class="p-2 bg-purple-600 rounded-lg">üéÆ</span>
          Panel de Control
        </h2>
        <div class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <button onclick="getData('usuarios')" 
              class="btn-primary text-white py-4 px-6 rounded-xl font-bold text-lg flex items-center justify-center gap-3">
              <span>üë•</span>
              Ver Usuarios
            </button>
            <button onclick="getData('stats')" 
              class="bg-slate-700 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-slate-600 transition-all flex items-center justify-center gap-3">
              <span>üìà</span>
              Estad√≠sticas
            </button>
          </div>
          
          <div class="space-y-4">
            <div class="code-block p-4">
              <h3 class="font-semibold mb-3 text-white flex items-center gap-2">
                <span>üìã</span>
                Consola de Salida
              </h3>
              <pre id="output" class="text-green-400 text-sm h-32 overflow-auto font-mono bg-black/30 p-3 rounded-lg">Esperando solicitud...</pre>
            </div>
            
            <div class="code-block p-4">
              <h3 class="font-semibold mb-3 text-white flex items-center gap-2">
                <span>‚úÖ</span>
                Resultado
              </h3>
              <div id="resultado" class="text-blue-300 text-sm h-32 overflow-auto font-mono bg-black/30 p-3 rounded-lg"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Crear Usuario -->
      <div class="neo-card p-6">
        <h2 class="text-2xl font-bold mb-6 text-white flex items-center gap-3">
          <span class="p-2 bg-green-600 rounded-lg">‚ûï</span>
          Nuevo Usuario
        </h2>
        <form id="createUserForm" onsubmit="event.preventDefault(); createUserFromForm();">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2 text-slate-300">Nombre Completo</label>
              <input id="cu_nombre" type="text" 
                class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                placeholder="Ej: Carlos Mendoza" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2 text-slate-300">Edad</label>
              <input id="cu_edad" type="number" min="0"
                class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                placeholder="Ej: 28" required>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2 text-slate-300">Rol</label>
              <input id="cu_rol" type="text"
                class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                placeholder="Ej: Analista de Datos" required>
            </div>
            <div class="flex gap-3 pt-2">
              <button type="submit" class="btn-success text-white py-3 px-6 rounded-xl font-bold flex-1 flex items-center justify-center gap-2">
                <span>üöÄ</span>
                Crear Usuario
              </button>
              <button type="button" onclick="document.getElementById('createUserForm').reset(); clearMessages();" 
                class="bg-slate-700 text-white py-3 px-4 rounded-xl font-bold hover:bg-slate-600 transition-all">
                ‚Ü∫
              </button>
            </div>
            <p id="cu_error" class="text-red-400 text-sm font-medium"></p>
          </div>
        </form>
      </div>
    </div>

    <!-- Second Row -->
    <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8">
      
      <!-- Actualizar Usuario -->
      <div class="neo-card p-6">
        <h2 class="text-2xl font-bold mb-6 text-white flex items-center gap-3">
          <span class="p-2 bg-yellow-600 rounded-lg">‚úèÔ∏è</span>
          Actualizar Usuario
        </h2>
        <form id="updateUserForm" onsubmit="event.preventDefault(); updateUserFromForm();">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2 text-slate-300">ID del Usuario</label>
              <input id="uu_id" type="number" required
                class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                placeholder="ID del usuario a actualizar">
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium mb-2 text-slate-300">Nombre (opcional)</label>
                <input id="uu_nombre" type="text"
                  class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="Nuevo nombre">
              </div>
              <div>
                <label class="block text-sm font-medium mb-2 text-slate-300">Edad (opcional)</label>
                <input id="uu_edad" type="number" min="0"
                  class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="Nueva edad">
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2 text-slate-300">Rol (opcional)</label>
              <input id="uu_rol" type="text"
                class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                placeholder="Nuevo rol">
            </div>
            <div class="flex gap-3 pt-2">
              <button type="submit" class="btn-warning text-white py-3 px-6 rounded-xl font-bold flex-1 flex items-center justify-center gap-2">
                <span>‚ö°</span>
                Actualizar
              </button>
              <button type="button" onclick="document.getElementById('updateUserForm').reset(); clearMessages();" 
                class="bg-slate-700 text-white py-3 px-4 rounded-xl font-bold hover:bg-slate-600 transition-all">
                ‚Ü∫
              </button>
            </div>
            <p id="uu_error" class="text-red-400 text-sm font-medium"></p>
          </div>
        </form>
      </div>

      <!-- Eliminar Usuario -->
      <div class="neo-card p-6">
        <h2 class="text-2xl font-bold mb-6 text-white flex items-center gap-3">
          <span class="p-2 bg-red-600 rounded-lg">üóëÔ∏è</span>
          Eliminar Usuario
        </h2>
        <form id="deleteUserForm" onsubmit="event.preventDefault(); deleteUserFromForm();">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2 text-slate-300">ID del Usuario</label>
              <input id="du_id" type="number" required
                class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                placeholder="ID del usuario a eliminar">
            </div>
            <div class="flex gap-3 pt-2">
              <button type="submit" class="btn-danger text-white py-3 px-6 rounded-xl font-bold flex-1 flex items-center justify-center gap-2">
                <span>‚ö†Ô∏è</span>
                Eliminar Usuario
              </button>
              <button type="button" onclick="document.getElementById('deleteUserForm').reset(); clearMessages();" 
                class="bg-slate-700 text-white py-3 px-4 rounded-xl font-bold hover:bg-slate-600 transition-all">
                ‚Ü∫
              </button>
            </div>
            <p id="du_error" class="text-red-400 text-sm font-medium"></p>
          </div>
        </form>
      </div>
    </div>

    <!-- Registro de Eventos -->
    <div class="neo-card p-6 mb-8">
      <h2 class="text-2xl font-bold mb-6 text-white flex items-center gap-3">
        <span class="p-2 bg-blue-600 rounded-lg">üìù</span>
        Registro de Eventos
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="md:col-span-2">
          <label class="block text-sm font-medium mb-2 text-slate-300">Nombre del Evento</label>
          <input id="le_nombre" placeholder="Describe el evento (ej: Login de usuario)"
            class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium mb-2 text-slate-300">Acci√≥n</label>
          <input id="le_accion" placeholder="Tipo de acci√≥n (ej: LOGIN)"
            class="w-full p-3 rounded-lg bg-slate-800 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
      </div>
      <div class="flex gap-3">
        <button onclick="sendLogEvent()" class="btn-primary text-white py-3 px-8 rounded-xl font-bold flex items-center gap-2">
          <span>üì®</span>
          Registrar Evento
        </button>
        <button onclick="document.getElementById('le_nombre').value=''; document.getElementById('le_accion').value='';" 
          class="bg-slate-700 text-white py-3 px-6 rounded-xl font-bold hover:bg-slate-600 transition-all">
          Limpiar Campos
        </button>
      </div>
      <p id="logEventError" class="mt-4 text-red-400 text-sm font-medium"></p>
    </div>

    <footer class="text-center mt-12 text-slate-500 text-sm border-t border-slate-800 pt-6">
      <div class="flex items-center justify-center gap-2 mb-2">
        <span class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></span>
        <span>Sistema API REST - Catalina v2.0</span>
        <span class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></span>
      </div>
      <p>¬© 2024 Panel de Administraci√≥n - Todos los derechos reservados</p>
    </footer>
  </div>

    <script>
    // Configuraci√≥n de la API - Puerto 81 para evitar conflictos con otros servicios
    const API_BASE_URL = 'http://localhost:81/restapicata/api';

    // Sistema de autenticaci√≥n para index.html
    let authToken = localStorage.getItem('authToken');
    let currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');

    // Verificar sesi√≥n al cargar
    document.addEventListener('DOMContentLoaded', function() {
        if (!authToken || !currentUser) {
            // Redirigir al login si no hay sesi√≥n
            window.location.href = 'login.html';
            return;
        }
        
        // Mostrar informaci√≥n del usuario
        document.getElementById('userName').textContent = currentUser.nombre;
        document.getElementById('userRole').textContent = currentUser.rol;
        
        // Aplicar permisos seg√∫n el rol
        applyRolePermissions(currentUser.rol);
    });

    // Funci√≥n para aplicar permisos seg√∫n el rol - CORREGIDA
    function applyRolePermissions(userRole) {
        console.log('Aplicando permisos para rol:', userRole);
        
        // Encontrar las secciones CORRECTAMENTE usando IDs espec√≠ficos
        const createUserCard = document.querySelector('.neo-card:nth-child(2)'); // Segunda tarjeta
        const updateUserCard = document.querySelector('.xl\\:grid-cols-2 .neo-card:first-child'); // Primera tarjeta de la segunda fila
        const deleteUserCard = document.querySelector('.xl\\:grid-cols-2 .neo-card:last-child'); // Segunda tarjeta de la segunda fila
        
        console.log('Secciones encontradas:', {
            create: !!createUserCard,
            update: !!updateUserCard, 
            delete: !!deleteUserCard
        });

        // Solo administradores pueden crear, actualizar y eliminar
        if (userRole !== 'administrador') {
            if (createUserCard) {
                createUserCard.innerHTML = `
                    <div class="text-center p-8">
                        <div class="text-4xl mb-4">üîí</div>
                        <h3 class="text-xl font-bold text-white mb-2">Acceso Restringido</h3>
                        <p class="text-slate-400">Se requieren privilegios de administrador para crear usuarios</p>
                        <p class="text-slate-500 text-sm mt-2">Tu rol actual: <strong>${userRole}</strong></p>
                    </div>
                `;
            }
            
            if (updateUserCard) {
                updateUserCard.innerHTML = `
                    <div class="text-center p-8">
                        <div class="text-4xl mb-4">üîí</div>
                        <h3 class="text-xl font-bold text-white mb-2">Acceso Restringido</h3>
                        <p class="text-slate-400">Se requieren privilegios de administrador para actualizar usuarios</p>
                        <p class="text-slate-500 text-sm mt-2">Tu rol actual: <strong>${userRole}</strong></p>
                    </div>
                `;
            }
            
            if (deleteUserCard) {
                deleteUserCard.innerHTML = `
                    <div class="text-center p-8">
                        <div class="text-4xl mb-4">üîí</div>
                        <h3 class="text-xl font-bold text-white mb-2">Acceso Restringido</h3>
                        <p class="text-slate-400">Se requieren privilegios de administrador para eliminar usuarios</p>
                        <p class="text-slate-500 text-sm mt-2">Tu rol actual: <strong>${userRole}</strong></p>
                    </div>
                `;
            }
        }
        
        // Cambiar color del badge seg√∫n el rol
        const userBadge = document.getElementById('userBadge');
        if (userBadge) {
            if (userRole === 'administrador') {
                userBadge.style.background = 'linear-gradient(135deg, #dc2626, #ea580c)'; // Rojo para admin
                userBadge.innerHTML = `<span>üëë ${currentUser.nombre}</span> - <span>Administrador</span>`;
            } else if (userRole === 'desarrollador') {
                userBadge.style.background = 'linear-gradient(135deg, #7c3aed, #c026d3)'; // Morado para desarrollador
                userBadge.innerHTML = `<span>üíª ${currentUser.nombre}</span> - <span>Desarrollador</span>`;
            } else {
                userBadge.style.background = 'linear-gradient(135deg, #059669, #0d9488)'; // Verde para usuarios normales
                userBadge.innerHTML = `<span>üë§ ${currentUser.nombre}</span> - <span>Usuario</span>`;
            }
        }
    }

    // Funci√≥n de logout - CORREGIDA
    async function logout() {
        try {
            await fetch(`${API_BASE_URL}/auth/logout`, {
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                }
            });
        } catch (error) {
            console.error('Error en logout:', error);
        } finally {
            // Limpiar datos y redirigir
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
    }

    // Funci√≥n para hacer requests autenticados - CORREGIDA
    async function makeAuthenticatedRequest(endpoint, options = {}) {
        if (!authToken) {
            window.location.href = 'login.html';
            throw new Error('No autenticado');
        }

        const defaultOptions = {
            headers: {
                'Authorization': 'Bearer ' + authToken,
                'Content-Type': 'application/json'
            }
        };

        const mergedOptions = { ...defaultOptions, ...options };
        const url = `${API_BASE_URL}/${endpoint}`;
        
        const response = await fetch(url, mergedOptions);
        
        // Si el token expir√≥, hacer logout
        if (response.status === 401) {
            logout();
            throw new Error('Sesi√≥n expirada');
        }

        return response;
    }

    // Sobrescribir las funciones de tu script.js para usar autenticaci√≥n
    async function getData(endpoint) {
        try {
            const response = await makeAuthenticatedRequest(endpoint);
            const data = await response.json();
            
            // Mostrar en consola de salida
            const output = document.getElementById('output');
            const resultado = document.getElementById('resultado');
            
            output.textContent = JSON.stringify(data, null, 2);
            
            if (data.success) {
                resultado.innerHTML = '<span class="text-green-400">‚úÖ Solicitud exitosa</span>';
                // Si es la lista de usuarios, mostrar informaci√≥n del rol
                if (endpoint === 'usuarios' && data.user_role) {
                    resultado.innerHTML += `<br><span class="text-blue-400">Tu rol: ${data.user_role}</span>`;
                }
            } else {
                resultado.innerHTML = '<span class="text-red-400">‚ùå Error en la solicitud</span>';
                if (data.error && data.error.includes('administrador')) {
                    resultado.innerHTML += `<br><span class="text-yellow-400">üîí Se requieren privilegios de administrador</span>`;
                }
            }
              
        } catch (error) {
            console.error('Error:', error);
            document.getElementById('output').textContent = 'Error: ' + error.message;
            document.getElementById('resultado').innerHTML = '<span class="text-red-400">‚ùå Error de conexi√≥n</span>';
        }
    }

    // Funciones para los formularios - actualizadas con autenticaci√≥n
    async function createUserFromForm() {
        // Verificar si el usuario actual es administrador
        if (currentUser.rol !== 'administrador') {
            document.getElementById('cu_error').textContent = 'üîí Se requieren privilegios de administrador para crear usuarios';
            return;
        }

        const nombre = document.getElementById('cu_nombre').value;
        const edad = document.getElementById('cu_edad').value;
        const rol = document.getElementById('cu_rol').value;
        const errorElement = document.getElementById('cu_error');

        try {
            const response = await makeAuthenticatedRequest('usuarios', {
                method: 'POST',
                body: JSON.stringify({ nombre, edad, rol })
            });

            const data = await response.json();
            
            if (data.success) {
                errorElement.textContent = '';
                document.getElementById('output').textContent = JSON.stringify(data, null, 2);
                document.getElementById('resultado').innerHTML = '<span class="text-green-400">‚úÖ Usuario creado exitosamente</span>';
                document.getElementById('createUserForm').reset();
            } else {
                errorElement.textContent = data.error || 'Error al crear usuario';
            }
        } catch (error) {
            errorElement.textContent = 'Error: ' + error.message;
        }
    }

    async function updateUserFromForm() {
        // Verificar si el usuario actual es administrador
        if (currentUser.rol !== 'administrador') {
            document.getElementById('uu_error').textContent = 'üîí Se requieren privilegios de administrador para actualizar usuarios';
            return;
        }

        const id = document.getElementById('uu_id').value;
        const nombre = document.getElementById('uu_nombre').value;
        const edad = document.getElementById('uu_edad').value;
        const rol = document.getElementById('uu_rol').value;
        const errorElement = document.getElementById('uu_error');

        try {
            const updateData = { id };
            if (nombre) updateData.nombre = nombre;
            if (edad) updateData.edad = edad;
            if (rol) updateData.rol = rol;

            const response = await makeAuthenticatedRequest('usuarios', {
                method: 'PATCH',
                body: JSON.stringify(updateData)
            });

            const data = await response.json();
            
            if (data.success) {
                errorElement.textContent = '';
                document.getElementById('output').textContent = JSON.stringify(data, null, 2);
                document.getElementById('resultado').innerHTML = '<span class="text-green-400">‚úÖ Usuario actualizado exitosamente</span>';
                document.getElementById('updateUserForm').reset();
            } else {
                errorElement.textContent = data.error || 'Error al actualizar usuario';
            }
        } catch (error) {
            errorElement.textContent = 'Error: ' + error.message;
        }
    }

    async function deleteUserFromForm() {
        // Verificar si el usuario actual es administrador
        if (currentUser.rol !== 'administrador') {
            document.getElementById('du_error').textContent = 'üîí Se requieren privilegios de administrador para eliminar usuarios';
            return;
        }

        const id = document.getElementById('du_id').value;
        const errorElement = document.getElementById('du_error');

        try {
            const response = await makeAuthenticatedRequest('usuarios', {
                method: 'DELETE',
                body: JSON.stringify({ id })
            });

            const data = await response.json();
            
            if (data.success) {
                errorElement.textContent = '';
                document.getElementById('output').textContent = JSON.stringify(data, null, 2);
                document.getElementById('resultado').innerHTML = '<span class="text-green-400">‚úÖ Usuario eliminado exitosamente</span>';
                document.getElementById('deleteUserForm').reset();
            } else {
                errorElement.textContent = data.error || 'Error al eliminar usuario';
            }
        } catch (error) {
            errorElement.textContent = 'Error: ' + error.message;
        }
    }

    async function sendLogEvent() {
        const nombre = document.getElementById('le_nombre').value;
        const accion = document.getElementById('le_accion').value;
        const errorElement = document.getElementById('logEventError');

        try {
            const response = await makeAuthenticatedRequest('logevent', {
                method: 'POST',
                body: JSON.stringify({ nombre, accion })
            });

            const data = await response.json();
            
            if (data.success) {
                errorElement.textContent = '';
                document.getElementById('output').textContent = JSON.stringify(data, null, 2);
                document.getElementById('resultado').innerHTML = '<span class="text-green-400">‚úÖ Evento registrado exitosamente</span>';
                document.getElementById('le_nombre').value = '';
                document.getElementById('le_accion').value = '';
            } else {
                errorElement.textContent = data.error || 'Error al registrar evento';
            }
        } catch (error) {
            errorElement.textContent = 'Error: ' + error.message;
        }
    }

    // Funci√≥n para limpiar mensajes
    function clearMessages() {
        document.getElementById('cu_error').textContent = '';
        document.getElementById('uu_error').textContent = '';
        document.getElementById('du_error').textContent = '';
        document.getElementById('logEventError').textContent = '';
    }
</script>

  <script src="restapicata/script.js"></script>
</body>
</html>